<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" type="text/css" href="public/style.css" />
    </head>
    <body id="content">
        <h1>Recent Projects</h1>
        <script>
            // let div = document.createElement('div');
            // div.setAttribute('class', 'article');
            // div.innerHTML = "<object height='500' width='500'  data='public/projects/happy-computer/index.html'></object>";
            // document.getElementById('content').appendChild(div);

            var xml = new XMLHttpRequest();
            xml.overrideMimeType("application/json");
            xml.open("GET", "public/data.json", true);

            xml.onreadystatechange = () => {
                if (xml.readyState == 4 && xml.status == 200) {
                    callback(xml.responseText)
                }
            }

            function callback(data) {
                var json = JSON.parse(data);

                json.array.forEach(element => {
                    let heading = document.createElement('h1');
                    heading.nodeValue = element["heading"];
                    document.getElementById('content').appendChild(heading);
                    element["contents"].forEach(item => {
                        let object = document.createElement('object');
                        object.setAttribute('data', item);
                        object.setAttribute('width', '500');
                        object.setAttribute('height', '500');
                        document.getElementById('content').appendChild(object);
                    });
                });
            }
        </script>
    </body>
</html>